

# Домашнее задание №12


* **Реализовать прямое соединение двух или более таблиц.**  
* **Реализовать левостороннее (или правостороннее) соединение двух или более таблиц.**  
* **Реализовать кросс соединение двух или более таблиц.**  
* **Реализовать полное соединение двух или более таблиц.**  
* **Реализовать запрос, в котором будут использованы разные типы соединений.**  
* **Сделать комментарии на каждый запрос.**
* **К работе приложить структуру таблиц, для которых выполнялись соединения.**
* **Задание со звездочкой. Придумайте 3 своих метрики на основе показанных представлений, отправьте их через ЛК, а так же поделитесь с коллегами в слаке.**  

![Альт-текст](Images/HW12/01.png)  
![Альт-текст](Images/HW12/02.png)  
![Альт-текст](Images/HW12/03.png)  
_Создаём таблицы, заполняем их данными и пересобираем статистику по ним._  

_Создаём обычный индекс к таблице и проверяем план запроса к ней с индексом. 
(Происходит Index Only Scan, так как мы запросили только поле id в индексе эти данные есть и обращаться к страницам не нужно.
Так же стоит отметить значение Heap Fetches = 0 это означает что все страницы помечены в карте видимости как видимые).  Время выполнения 0.095 ms._  
_В данном случае происходит Index Scan, так как мы запросили поле col2, которое не хранится в индексе. Время выполнения 0.023 ms (мееньше чем было при Index Only Scan, что немного меня удивило)._  
![Альт-текст](Images/HW12/04.png)
_Создаём таблицу и проверяем план запроса к ней без индекса. (Происходит параллельное (в двух процессах) построчное сканирование таблицы - Seq Scan).  Время выполнения 292.331 ms._  
![Альт-текст](Images/HW12/04_1.png)  
_Добавляем и заполняем поле к нашей таблице для организации полнотекстового поиска (some_text_lexeme). И пробуем поиск по нему без индекса. (План запроса похож на предыдущий, добавилась JIT компиляция и время выполнения выросло).  Время выполнения 877.252 ms._  
![Альт-текст](Images/HW12/05.png)  
_Создаём индекс GIN по колонке some_text_lexeme и проверяем план запроса. Время выполнения 64.837 ms._  
![Альт-текст](Images/HW12/05_1.png)  
_Перед созданием индекса на функцию проверим план запроса с условием на эту функцию. Время выполнения 13.425 ms._  
![Альт-текст](Images/HW12/06.png)  
_Создаём индекс на функцию и снова смотрим план запроса. Время выполнения 0.034 ms._  
![Альт-текст](Images/HW12/06_1.png)  
_Пересоздаём таблицу и смотрим план запроса с условием по двум полям. Время выполнения 4.355 ms._  
![Альт-текст](Images/HW12/07.png)  
_Создаём составной индекс и снова смотрим план запроса с условием по двум полям. Время выполнения 0.034 ms._  
![Альт-текст](Images/HW12/07_1.png)  
![Альт-текст](Images/HW12/08.png)  
![Альт-текст](Images/HW12/08_1.png)  
![Альт-текст](Images/HW12/09.png)  
![Альт-текст](Images/HW12/09_01.png)  
![Альт-текст](Images/HW12/10.png)  
![Альт-текст](Images/HW12/10_1.png)  
![Альт-текст](Images/HW12/11.png)  
![Альт-текст](Images/HW12/11_1.png)  
![Альт-текст](Images/HW12/11_2.png)  
