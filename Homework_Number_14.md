

# Домашнее задание №14


* **Создать триггер для поддержки витрины в актуальном состоянии.**  

![Альт-текст](Images/HW14/01.png)  
_Создаём и заполняем данными таблицу с товарами._  
  
![Альт-текст](Images/HW14/02.png)  
_Создаём таблицу с продажами._  
  
![Альт-текст](Images/HW14/03.png)  
_Создаём таблицу, которая будет выполнять роль витрины._  
  
![Альт-текст](Images/HW14/04.png)  
_Создаём триггерную функцию._  
  
![Альт-текст](Images/HW14/05.png)  
_Создаём сам триггер._  
  
![Альт-текст](Images/HW14/06.png)  
_Делаем несколько вставок в таблицу с продажами._  
  
![Альт-текст](Images/HW14/07.png)  
_Смотрим что выводится в отчёте._  
  
![Альт-текст](Images/HW14/08.png)  
_Смотрим что содержит наша витринная таблица и видим что данные совпадают, следовательно наш триггер работает как задумано._  
  
![Альт-текст](Images/HW14/09.png)  
_Удалим запись из таблицы продаж._  
  
![Альт-текст](Images/HW14/10.png)  
_Смотрим что выводится в отчёте._  

![Альт-текст](Images/HW14/11.png)  
_Смотрим что содержит наша витринная таблица и видим что данные совпадают, следовательно наш триггер работает как задумано._  

![Альт-текст](Images/HW14/12.png)  
_Изменим поле sales_qty в таблице продаж._  

![Альт-текст](Images/HW14/13.png)  
_Смотрим что выводится в отчёте._  

![Альт-текст](Images/HW14/14.png)  
_Смотрим что содержит наша витринная таблица и видим что данные совпадают, следовательно наш триггер работает как задумано._  

* **Задание со звездочкой**  
* **Чем такая схема (витрина+триггер) предпочтительнее отчета, создаваемого "по требованию" (кроме производительности)?**  
* **Подсказка: В реальной жизни возможны изменения цен.**  

 _Очевидно, что плюс данного подхода (кроме повышения производительности) состоит в том, что при изменении цены на товар в таблице goods, в нашей витринной таблице данные будут отражать реальную историческую действительность. В то время как в отчётё будет тянуться последняя введённая цена._  


